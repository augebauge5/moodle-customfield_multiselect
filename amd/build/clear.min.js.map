{"version":3,"file":"clear.min.js","sources":["../src/clear.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n *\n * @package   customfield_multiselect\n * @copyright  2020 CALL Learning 2020 - Laurent David <laurent@call-learning.fr>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/str'],\n    function ($, Str) {\n        return {\n            init: function (buttonid, autocompleteid) {\n                $('#' + buttonid).click(function () {\n                    // Find the select element\n                    var select = $('#' + autocompleteid);\n                    \n                    if (select.length > 0) {\n                        // Clear all selected options\n                        select.find('option').prop('selected', false);\n                        \n                        // Find the autocomplete selection container within the same parent\n                        var selectionElement = select.closest('.felement').find('.form-autocomplete-selection');\n                        \n                        if (selectionElement.length > 0) {\n                            // Clear the visual selection elements\n                            selectionElement.find('[role=option]').remove();\n                            \n                            // Add the \"no selection\" text using Moodle's core language string\n                            Str.get_string('noselection', 'form').then(function(noselectiontext) {\n                                if (selectionElement.find('.m-1').length === 0) {\n                                    selectionElement.append('<span class=\"m-1 h-5\">' + noselectiontext + '</span>');\n                                }\n                            });\n                        }\n                        \n                        // Trigger change event on the select\n                        select[0].dispatchEvent(new Event('change', {bubbles: true}));\n                    }\n                });\n            }\n        };\n    });\n"],"names":["define","$","Str","init","buttonid","autocompleteid","click","select","length","find","prop","selectionElement","closest","remove","get_string","then","noselectiontext","append","dispatchEvent","Event","bubbles"],"mappings":";;;;;;AAqBAA,OAAM,gCAAC,CAAC,SAAU,aACd,SAAUC,EAAGC,KACT,MAAO,CACHC,KAAM,SAAUC,SAAUC,gBACtBJ,EAAE,IAAMG,UAAUE,OAAM,WAEpB,IAAIC,OAASN,EAAE,IAAMI,gBAErB,GAAIE,OAAOC,OAAS,EAAG,CAEnBD,OAAOE,KAAK,UAAUC,KAAK,YAAY,GAGvC,IAAIC,iBAAmBJ,OAAOK,QAAQ,aAAaH,KAAK,gCAEpDE,iBAAiBH,OAAS,IAE1BG,iBAAiBF,KAAK,iBAAiBI,SAGvCX,IAAIY,WAAW,cAAe,QAAQC,MAAK,SAASC,iBACH,IAAzCL,iBAAiBF,KAAK,QAAQD,QAC9BG,iBAAiBM,OAAO,yBAA2BD,gBAAkB,UAE7E,KAIJT,OAAO,GAAGW,cAAc,IAAIC,MAAM,SAAU,CAACC,SAAS,IAC1D,CACJ,GACJ,EAER"}